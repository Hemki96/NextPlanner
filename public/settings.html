<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Swim Planner – Editor-Einstellungen</title>
    <script>
      (function () {
        try {
          var storedTheme = localStorage.getItem("nextplanner-theme");
          if (storedTheme === "dark") {
            document.documentElement.dataset.theme = "dark";
          } else if (storedTheme === "light") {
            delete document.documentElement.dataset.theme;
          }
        } catch (error) {
          /* ignore errors (private mode, etc.) */
        }
      })();
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    />
    <script>
      tailwind.config = {
        darkMode: ["class", "[data-theme='dark']"],
        theme: {
          extend: {
            fontFamily: {
              sans: [
                "Inter",
                "system-ui",
                "-apple-system",
                "BlinkMacSystemFont",
                "'Segoe UI'",
                "sans-serif",
              ],
            },
          },
        },
      };
    </script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <link rel="stylesheet" href="/css/main.css" />
    <script type="module" src="/js/tailwind-init.js"></script>
    <script type="module" src="/js/theme.js"></script>
</head>
<body>
  <header class="page-header">
    <h1>Editor &amp; Schnellbausteine konfigurieren</h1>
    <p>Passe die Hervorhebungen im Plan-Editor sowie die Kategorien und Einträge der Schnellbausteine an deine Trainingssprache an. Die Einstellungen werden lokal im Browser gespeichert.</p>
    <nav class="page-nav" aria-label="Hauptnavigation">
      <a href="/index.html" class="nav-link" data-feature="calendarView">Plan-Kalender</a>
      <a href="/planner.html" class="nav-link">Planner</a>
      <a href="/templates.html" class="nav-link" data-feature="templateLibrary">Vorlagen</a>
      <a href="/settings.html" class="nav-link is-active" aria-current="page">Einstellungen</a>
      <a href="/backup.html" class="nav-link">Backups</a>
    </nav>
  </header>
  <main class="page-content">
    <section class="page-card">
      <header class="section-header">
        <h2>Darstellung</h2>
      </header>
      <div class="theme-settings">
        <div class="toggle-control">
          <label class="switch" for="theme-toggle">
            <input
              type="checkbox"
              id="theme-toggle"
              aria-describedby="theme-toggle-description"
              aria-labelledby="theme-toggle-heading"
            />
            <span class="switch-slider" aria-hidden="true"></span>
          </label>
          <div>
            <h3 id="theme-toggle-heading">Dunkler Modus</h3>
            <p id="theme-toggle-description">Nutze dunkle Oberflächenfarben, um deine Augen bei wenig Licht zu entlasten.</p>
          </div>
        </div>
      </div>
      <p id="theme-settings-status" class="form-status" role="status" aria-live="polite"></p>
    </section>
    <section class="page-card">
      <header class="section-header">
        <h2>Funktionen ein- und ausblenden</h2>
        <div class="section-actions">
          <button type="button" class="ghost-button" id="feature-settings-reset">Alle aktivieren</button>
        </div>
      </header>
      <p class="form-hint">
        Lege fest, welche Bereiche der Anwendung standardmäßig sichtbar sind. Änderungen werden sofort übernommen und
        gelten für alle Geräte, die denselben Browser-Speicher verwenden.
      </p>
      <ul id="feature-settings-list" class="feature-toggle-list" aria-live="polite"></ul>
      <p id="feature-settings-status" class="form-status" role="status" aria-live="polite"></p>
    </section>
    <section class="page-card">
      <header class="section-header">
        <h2>Plan-Markierungen</h2>
        <div class="section-actions">
          <button type="button" class="ghost-button" id="highlight-settings-reset">Standard wiederherstellen</button>
        </div>
      </header>
      <p class="form-hint">Wähle aus, welche Eingaben im Plan-Editor farblich hervorgehoben werden – zum Beispiel Überschriften, Distanzen oder Intensitätscodes.</p>
      <ul id="highlight-settings-list" class="feature-toggle-list"></ul>
      <div class="highlight-config-grid form-grid">
        <label class="form-field" for="highlight-intensity-input">
          <span>Intensitätscodes (je Zeile ein Eintrag)</span>
          <textarea
            id="highlight-intensity-input"
            rows="6"
            placeholder="CLEAR&#10;PINK4&#10;EN1"
          ></textarea>
          <span class="field-hint">Neue Codes werden automatisch in Markierungen und Auswertungen berücksichtigt.</span>
        </label>
        <label class="form-field" for="highlight-equipment-input">
          <span>Material (je Zeile ein Eintrag)</span>
          <textarea
            id="highlight-equipment-input"
            rows="6"
            placeholder="Pullbuoy&#10;Paddles&#10;Flossen"
          ></textarea>
          <span class="field-hint">Hinterlegte Bezeichnungen erscheinen im Materialüberblick der Auswertung.</span>
        </label>
      </div>
      <div class="form-actions highlight-config-actions">
        <button type="button" class="primary-button" id="highlight-config-save">Markierungen speichern</button>
      </div>
      <p id="highlight-settings-status" class="form-status" role="status" aria-live="polite"></p>
    </section>
    <section class="page-card" data-feature="teamLibrary">
      <header class="section-header">
        <h2>Kategorien &amp; Einträge</h2>
        <div class="section-actions">
          <button type="button" class="ghost-button" id="add-group">Kategorie hinzufügen</button>
          <button type="button" class="ghost-button" id="expand-groups">Alle aufklappen</button>
          <button type="button" class="ghost-button" id="collapse-groups">Alle einklappen</button>
          <button type="button" class="ghost-button" id="import-groups">Konfiguration importieren</button>
          <button type="button" class="ghost-button" id="export-groups">Konfiguration exportieren</button>
          <button type="button" class="ghost-button" id="reset-groups">Auf Standard zurücksetzen</button>
        </div>
        <input
          type="file"
          id="import-groups-file"
          accept="application/json"
          hidden
          aria-hidden="true"
        />
      </header>
      <p class="form-hint">Jede Kategorie enthält mehrere Schnellbausteine. Für jeden Eintrag kannst du steuern, ob beim Einfügen automatisch Zeilenumbrüche ergänzt werden sollen.</p>
      <div id="snippet-groups" class="snippet-settings" aria-live="polite"></div>
      <div class="form-actions">
        <button type="button" class="primary-button" id="save-groups">Änderungen speichern</button>
      </div>
      <p id="settings-status" class="form-status" role="status" aria-live="polite"></p>
    </section>
    <section class="page-card">
      <header class="section-header">
        <h2>Team-Bibliothek</h2>
        <div class="section-actions">
          <button type="button" class="ghost-button" id="team-library-refresh">Team-Bibliothek laden</button>
          <button type="button" class="ghost-button" id="team-library-push">Eigene Bausteine freigeben</button>
        </div>
      </header>
      <p class="form-hint">
        Synchronisiere deine Schnellbausteine mit der gemeinsamen Team-Bibliothek. Die Funktionen stehen zur Verfügung,
        wenn der lokale NextPlanner-Server läuft (z.&nbsp;B. per <code>npm start</code>).
      </p>
      <dl class="team-library-meta">
        <div>
          <dt>Letzte Aktualisierung</dt>
          <dd id="team-library-updated">–</dd>
        </div>
      </dl>
      <p id="team-library-status" class="form-status" role="status" aria-live="polite"></p>
    </section>
  </main>
  <script type="module" src="/js/settings.js" defer></script>
</body>
</html>
