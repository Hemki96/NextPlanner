<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Swim Planner</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Einleitender Kopfbereich mit Titel und kurzer Beschreibung des Tools -->
  <header class="page-header">
    <h1>Swim Planner</h1>
    <p>Erstelle strukturierte Trainingspläne für das Schwimmtraining und erhalte sofort Auswertungen zu Umfang, Dauer, Intensität und Materialbedarf.</p>
    <nav class="page-nav" aria-label="Hauptnavigation">
      <a href="index.html" class="nav-link is-active" aria-current="page">Planner</a>
      <a href="templates.html" class="nav-link">Vorlagen</a>
      <a href="settings.html" class="nav-link">Schnellbausteine</a>
    </nav>
  </header>
  <!-- Dreispaltiges Layout: links Schnellbausteine, in der Mitte Eingabe, rechts Auswertung -->
  <main class="layout">
    <!-- Linke Spalte mit den Schnellbausteinen zum schnellen Einfügen -->
    <aside class="quick-panel" aria-labelledby="quick-snippet-title">
      <div class="quick-snippet-header">
        <h2 id="quick-snippet-title">Schnellbausteine</h2>
        <p class="quick-snippet-hint">
          Füge häufig genutzte Strukturbausteine für Blöcke, Runden, Material,
          Intensitäten, Abgangszeiten, Pausen und Beschreibungen per Klick in
          den Plan ein.
        </p>
      </div>
      <div id="quick-snippet-container" class="quick-snippet-groups"></div>
    </aside>
    <!-- Mittlere Spalte mit dem Freitext-Editor für den Trainingsplan -->
    <section class="input-panel">
      <h2>Trainingsplan eingeben</h2>
      <label class="sr-only" for="plan-input">Trainingsplan</label>
      <div class="plan-editor">
        <div id="plan-highlight" class="plan-highlight" aria-hidden="true"></div>
        <textarea
          id="plan-input"
          placeholder="Beispiel:\n## Warm-up\n4x50m GSA @1:00 w/ Pullbuoy\nP:00:20\n\n## Hauptsatz\n3 Runden:\n6x100m GSA @1:40 ORANGE8 w/ Paddles\n4x50m Be @0:55 PINK4 w/ Flossen\nEnde Runde\n200m GSA CLEAR\n\n## Cool-down\n200m locker GSA CLEAR"
          spellcheck="false"
        ></textarea>
      </div>
      <div class="input-actions">
        <button
          type="button"
          id="help-button"
          class="secondary-button"
          aria-haspopup="dialog"
          aria-controls="help-overlay"
        >
          Hinweise &amp; Syntax
        </button>
        <button type="button" id="import-button" class="secondary-button">
          Plan importieren
        </button>
        <input
          type="file"
          id="import-input"
          class="sr-only"
          accept=".txt,.md,.markdown,.doc,.html,.htm"
          aria-hidden="true"
          tabindex="-1"
        />
        <button type="button" id="export-markdown" class="secondary-button">
          Als Markdown exportieren
        </button>
        <button type="button" id="export-word" class="secondary-button">
          Als Word exportieren
        </button>
      </div>
      <p class="hint">Nutze Überschriften (z.B. <code>## Warm-up</code>) für Blöcke. Formate wie <code>4x50m</code>, <code>w/</code> für Material, <code>@</code> für Intervalle, <code>P:</code> für Pausen sowie Rundenangaben wie <code>3 Runden:</code> werden automatisch erkannt.</p>
    </section>
    <!-- Rechte Spalte fasst die Kennzahlen und Blockdetails live zusammen -->
    <aside class="summary-panel" aria-live="polite">
      <h2>Zusammenfassung</h2>
      <!-- Kennzahlen-Raster für Zeit, Distanz, Intensitäten und Equipment -->
      <div class="summary-grid">
        <div>
          <h3>Gesamtzeit</h3>
          <p id="total-time">0:00</p>
        </div>
        <div>
          <h3>Gesamtumfang</h3>
          <p id="total-distance">0 m</p>
        </div>
        <div>
          <h3>Intensitäten</h3>
          <ul id="intensity-list" class="tag-list"></ul>
        </div>
        <div>
          <h3>Material</h3>
          <ul id="equipment-list" class="tag-list"></ul>
        </div>
      </div>
      <!-- Übersicht der einzelnen Trainingsblöcke inklusive Fokusinformationen -->
      <div class="block-summary">
        <h3>Blöcke</h3>
        <ul id="block-list"></ul>
      </div>
    </aside>
  </main>
  <footer class="page-footer">
    <p><strong>Intensitätslegende:</strong> CLEAR, White2, White3, PINK4, PINK5, RED6, RED7, ORANGE8, ORANGE9, ORANGE10, PURPLE9, PURPLE10, BLUE8, BLUE9, BLUE10, GREEN, GOLD. Zusätzliche Kürzel: <abbr title="Arme">Ar</abbr>, <abbr title="Beine">Be</abbr>, <abbr title="Gesamte Lage">GSA</abbr>.</p>
  </footer>
  <!-- Overlay mit einer ausführlichen Dokumentation der Schlüsselbegriffe und Kürzel -->
  <div class="help-overlay" id="help-overlay" aria-hidden="true">
    <div class="help-dialog" role="dialog" aria-modal="true" aria-labelledby="help-title">
      <header class="help-header">
        <h2 id="help-title">Syntax-Hinweise</h2>
        <button type="button" id="help-close" class="icon-button" aria-label="Hinweise schließen">×</button>
      </header>
      <div class="help-content">
        <section>
          <h3>Blöcke strukturieren</h3>
          <p>Nutze Markdown-Überschriften wie <code>## Einschwimmen</code>, um Abschnitte zu kennzeichnen. Jeder Block wird separat zusammengefasst.</p>
        </section>
        <section>
          <h3>Sets definieren</h3>
          <ul>
            <li><strong>Anzahl &amp; Strecke:</strong> <code>4x50m</code> bedeutet 4 Wiederholungen à 50 Meter.</li>
            <li><strong>Lagencodes:</strong> <code>GSA</code> (Gesamte Lage), <code>Ar</code> (Arme), <code>Be</code> (Beine).</li>
            <li><strong>Material:</strong> <code>w/ Pullbuoy</code>, <code>w/ Paddles</code>, <code>w/ Flossen</code>, weitere Begriffe werden als Equipment übernommen.</li>
            <li><strong>Intervalle:</strong> <code>@1:30</code> gibt das Intervall pro Wiederholung an.</li>
            <li><strong>Pause:</strong> <code>P:00:20</code> addiert eine Pause nach dem Set.</li>
            <li><strong>Runden:</strong> <code>3 Runden:</code> oder <code>Runde x3</code> gruppiert mehrere Zeilen und zählt sie mehrfach. Eine Leerzeile oder <code>Ende Runde</code> beendet die Gruppe.</li>
          </ul>
        </section>
        <section>
          <h3>Intensitäten</h3>
          <p>Folgende Intensitätsstufen werden erkannt (Groß-/Kleinschreibung egal):</p>
          <ul class="tag-list">
            <li>CLEAR</li>
            <li>White2</li>
            <li>White3</li>
            <li>PINK4</li>
            <li>PINK5</li>
            <li>RED6</li>
            <li>RED7</li>
            <li>ORANGE8</li>
            <li>ORANGE9</li>
            <li>ORANGE10</li>
            <li>PURPLE9</li>
            <li>PURPLE10</li>
            <li>BLUE8</li>
            <li>BLUE9</li>
            <li>BLUE10</li>
            <li>GREEN</li>
            <li>GOLD</li>
          </ul>
        </section>
        <section>
          <h3>Zusätzliche Hinweise</h3>
          <ul>
            <li>Mehrere Materialien können hintereinander mit <code>w/</code> aufgeführt werden.</li>
            <li>Intervalle und Pausen unterstützen <code>mm:ss</code> oder <code>hh:mm:ss</code>.</li>
            <li>Frei formulierte Beschreibungen werden angezeigt, beeinflussen aber keine Kennzahlen.</li>
          </ul>
        </section>
      </div>
    </div>
  </div>
  <script type="module" src="js/app.js"></script>
</body>
</html>
